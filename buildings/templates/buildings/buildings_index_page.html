{% extends "base.html" %}

{% load navigation_tags static wagtailcore_tags wagtailimages_tags %}

{% block body_class %}buildings{% endblock %}

{% block breadcrumbs %}
<section class="breadcrumbs-section">
  <div class="container">
    {% breadcrumbs %}
  </div>
</section>
{% endblock breadcrumbs %}

{% block content %}
{% if request.GET.tag %}
<section class="filter-section">
  <div class="container">
    <div class="content">
      <p class="is-centered is-size-7">Filtered by #{{ request.GET.tag }}</p>
      <p><a class="button is-small" href="{% pageurl page %}">Remove filter</a></p>
    </div>
  </div>
</section>
{% endif %}
<section class="section last-section">
  <div class="container">
    <div class="content">
      <div class="columns is-multiline is-centered">
        {% for building in buildings %}
        <div class="column column is-half-tablet is-one-third-desktop">
          <a href="{% pageurl building %}" alt="{{building.title}}">
            <div class="card">
              <div class="card-image">
                <figure class="image is-marginless is-square">
                  {% image building.feed_image fill-500x500-c100 %}
                </figure>
              </div>
              <div class="card-content">
                <div class="content">
                  <h5 class="is-marginless">{{building.title}}, {{building.architect}}</h5>
                  {% for tag in building.get_tags %}
                  <a href="{% pageurl page %}?tag={{ tag }}"> #{{tag}} </a>
                  {% endfor %}
                </div>
              </div>
            </div>
          </a>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>
</section>
{% endblock content %}